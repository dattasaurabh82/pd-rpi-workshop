#N canvas 98 76 1263 686 10;
#X obj 121 381 *~;
#X obj 121 405 outlet~;
#N canvas 371 62 940 646 read 0;
#X obj 30 304 wrap~;
#X msg 30 235 \$1 0 \, \$2 \$3;
#X obj 30 212 pack f f f;
#X obj 44 37 inlet;
#X obj 59 137 +;
#X obj 32 84 t f f;
#X text 104 211 start (samples) \, end (samples) \, duration (ms);
#X obj 30 382 outlet~;
#X obj 454 49 loadbang;
#X obj 44 58 unpack f f f;
#X obj 454 156 expr size("$s1");
#X obj 454 180 s \$0-ARRAYSIZE;
#X obj 30 282 /~;
#X obj 76 258 r \$0-ARRAYSIZE;
#X obj 76 311 r \$0-ARRAYSIZE;
#X obj 30 327 *~;
#X obj 454 91 f \$1;
#X msg 454 112 \$1-IN;
#X obj 454 134 symbol;
#X obj 454 71 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 30 358 tabread4~ \$1-IN;
#X obj 30 258 vline~;
#X obj 124 382 outlet~;
#X text 67 -23 input : <start> \, <dur> \, <ratio> (start and dur both
in milliseconds). output1 : the grain \, output2 : the control signal
for reading sound in the array.;
#X obj 59 159 msToSamp;
#X obj 32 184 msToSamp;
#X obj 74 115 *;
#X connect 0 0 15 0;
#X connect 1 0 21 0;
#X connect 2 0 1 0;
#X connect 3 0 9 0;
#X connect 4 0 24 0;
#X connect 5 0 25 0;
#X connect 5 1 4 0;
#X connect 8 0 19 0;
#X connect 9 0 5 0;
#X connect 9 1 2 2;
#X connect 9 1 26 0;
#X connect 9 2 26 1;
#X connect 10 0 11 0;
#X connect 12 0 0 0;
#X connect 13 0 12 1;
#X connect 14 0 15 1;
#X connect 15 0 20 0;
#X connect 15 0 22 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 10 0;
#X connect 19 0 16 0;
#X connect 20 0 7 0;
#X connect 21 0 12 0;
#X connect 24 0 2 1;
#X connect 25 0 2 0;
#X connect 26 0 4 1;
#X restore 115 356 pd read;
#X text 49 20 args [<granulator-id>] ID of the root granulator patch
;
#N canvas 181 94 864 600 grainTrigger 0;
#X obj 173 372 del;
#X obj 144 37 nbx 5 14 -1e+37 1e+37 0 1 empty empty empty 0 -8 0 10
-262144 -1 -1 300 256;
#X obj 73 37 nbx 5 14 -1e+37 1e+37 0 1 empty empty empty 0 -8 0 10
-262144 -1 -1 200 256;
#X obj 195 259 *;
#X obj 238 259 *;
#X obj 221 136 t b f;
#X obj 221 37 nbx 5 14 -1e+37 1e+37 0 1 empty empty empty 0 -8 0 10
-262144 -1 -1 101 256;
#X floatatom 221 114 5 0 0 0 - - -;
#X obj 221 58 * 0.01;
#X obj 221 79 expr max(exp((1 - $f1) * 2.5) - 1 \, 0) \; if ($f1 >
0 \, 1 \, 0);
#X obj 446 114 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 371 474 spigot;
#X obj 371 536 outlet;
#X obj 113 259 r \$0-TRIGGER;
#X obj 173 473 s \$0-TRIGGER;
#X obj -22 58 s \$0-TRIGGER;
#X obj 21 -56 loadbang;
#X obj 206 373 r \$0-MINDUR;
#X obj 240 351 r \$0-MAXDUR;
#X obj 71 58 s \$0-MINDUR;
#X obj 146 58 s \$0-MAXDUR;
#X floatatom 371 517 15 0 0 0 - - -;
#X obj 21 -36 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 25 -12 t b b;
#X obj 173 450 del;
#X text 294 248 Wait for a random time before triggering. The bigger
the density the less we wait;
#X text 291 382 Trigger a random duration;
#X floatatom 173 302 5 0 0 0 - - -;
#X obj 371 496 int;
#X obj 173 395 randMinMax;
#X obj 173 280 randMinMax;
#X connect 0 0 29 0;
#X connect 1 0 20 0;
#X connect 2 0 19 0;
#X connect 3 0 30 1;
#X connect 4 0 30 2;
#X connect 5 0 3 0;
#X connect 5 0 4 0;
#X connect 5 1 3 1;
#X connect 5 1 4 1;
#X connect 6 0 8 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 7 0;
#X connect 9 1 10 0;
#X connect 10 0 11 1;
#X connect 11 0 28 0;
#X connect 13 0 30 0;
#X connect 16 0 22 0;
#X connect 17 0 29 1;
#X connect 18 0 29 2;
#X connect 21 0 12 0;
#X connect 22 0 23 0;
#X connect 23 0 15 0;
#X connect 23 1 6 0;
#X connect 23 1 1 0;
#X connect 23 1 2 0;
#X connect 24 0 14 0;
#X connect 27 0 0 0;
#X connect 28 0 21 0;
#X connect 29 0 11 0;
#X connect 29 0 24 0;
#X connect 30 0 27 0;
#X restore 144 91 pd grainTrigger;
#X obj 115 332 pack f f f;
#X obj 144 114 t b f;
#X floatatom 198 300 5 0 0 0 - - -;
#X floatatom 92 300 10 0 0 0 - - -;
#X floatatom 161 300 5 0 0 0 - - -;
#X obj 170 356 envExp;
#N canvas 358 177 959 520 playPos 0;
#X obj 54 114 r \$1-CTL-PLAYCENTER;
#X obj 177 114 r \$1-CTL-PLAYSPREAD;
#X floatatom 92 139 10 0 0 0 - - -;
#X obj 173 201 +;
#X obj 129 201 -;
#X floatatom 158 139 10 0 0 0 - - -;
#X obj 158 162 t b f;
#X obj 9 219 t f b;
#X obj 24 296 +;
#X obj -54 165 f;
#X obj -58 115 inlet;
#X obj -58 139 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -39 139 r \$1-WRITE-POS;
#X obj -54 190 sampToMs;
#X floatatom 39 273 10 0 0 0 - - -;
#X obj 24 322 outlet;
#X text -60 38 Playback position control. When triggers returns a position
in milliseconds to start reading from.;
#X obj 39 248 randMinMax -1000 -1000;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 17 2;
#X connect 4 0 17 1;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X connect 6 0 4 0;
#X connect 6 1 3 1;
#X connect 6 1 4 1;
#X connect 7 0 8 0;
#X connect 7 1 17 0;
#X connect 8 0 15 0;
#X connect 9 0 13 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 12 0 9 1;
#X connect 13 0 7 0;
#X connect 14 0 8 1;
#X connect 17 0 14 0;
#X restore 92 250 pd playPos;
#N canvas 868 185 450 352 pitch 1;
#X obj 164 131 +;
#X obj 135 131 -;
#X obj 164 101 t b f;
#X obj 94 230 randMinMax 1 1;
#X obj 142 59 r \$1-CTL-PITCHCENTER;
#X obj 164 80 r \$1-CTL-PITCHSPREAD;
#X obj 93 151 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 92 109 inlet;
#X obj 94 313 outlet;
#X floatatom 94 286 5 0 0 0 - - -;
#X obj 138 158 exp;
#X floatatom 138 198 5 0 0 0 - - -;
#X obj 178 159 exp;
#X floatatom 178 198 5 0 0 0 - - -;
#X connect 0 0 12 0;
#X connect 1 0 10 0;
#X connect 2 0 0 0;
#X connect 2 0 1 0;
#X connect 2 1 0 1;
#X connect 2 1 1 1;
#X connect 3 0 9 0;
#X connect 4 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X connect 6 0 3 0;
#X connect 7 0 6 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 11 0 3 1;
#X connect 12 0 13 0;
#X connect 13 0 3 2;
#X restore 198 250 pd pitch;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 4 0 6 0;
#X connect 5 0 2 0;
#X connect 6 0 11 0;
#X connect 6 1 9 0;
#X connect 6 1 10 0;
#X connect 6 1 12 0;
#X connect 7 0 5 2;
#X connect 8 0 5 0;
#X connect 9 0 5 1;
#X connect 10 0 0 1;
#X connect 11 0 8 0;
#X connect 12 0 7 0;
